<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendario - Sistema di Gestione Appuntamenti</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <meta name="description" content="Gestisci i tuoi appuntamenti e consensi" />
    <meta name="theme-color" content="#4f46e5">
    <!-- Stili CSS -->
    <style>
      /* Stili di base */
      body {
        font-family: 'Roboto', sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f9fafb;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }
      
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }
      
      h1 {
        color: #4f46e5;
        margin: 0;
        font-size: 2rem;
        font-weight: 700;
        display: flex;
        align-items: center;
      }
      
      h1 img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 1rem;
        object-fit: cover;
        transition: transform 0.5s ease;
      }
      
      h1:hover img {
        transform: rotate(30deg);
      }
      
      .btn {
        display: inline-block;
        background-color: #eef2ff;
        color: #4f46e5;
        padding: 0.75rem 1.25rem;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 500;
        text-align: center;
        transition: background-color 0.2s ease;
      }
      
      .btn:hover {
        background-color: #e0e7ff;
      }
      
      .btn-primary {
        background-color: #4f46e5;
        color: white;
      }
      
      .btn-primary:hover {
        background-color: #4338ca;
      }
      
      /* Calendar */
      .calendar-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }
      
      .calendar-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #111827;
      }
      
      .calendar-actions {
        display: flex;
        gap: 0.5rem;
      }
      
      .calendar-btn {
        padding: 0.5rem 1rem;
        border-radius: 6px;
        background-color: #f3f4f6;
        border: none;
        cursor: pointer;
        color: #4b5563;
        font-weight: 500;
      }
      
      .calendar-btn:hover {
        background-color: #e5e7eb;
      }
      
      .calendar-btn.active {
        background-color: #4f46e5;
        color: white;
      }
      
      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 0.5rem;
      }
      
      .day-labels {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 0.5rem;
        margin-bottom: 0.5rem;
      }
      
      .day-label {
        text-align: center;
        padding: 0.5rem;
        font-weight: 600;
        color: #4b5563;
      }
      
      .calendar-date {
        background-color: white;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        min-height: 100px;
        padding: 0.5rem;
      }
      
      .calendar-date.today {
        background-color: #eef2ff;
        border-color: #4f46e5;
      }
      
      .calendar-date.other-month {
        background-color: #f9fafb;
        opacity: 0.6;
      }
      
      .date-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
      }
      
      .date-number {
        font-weight: 600;
      }
      
      .appointment-indicator {
        width: 8px;
        height: 8px;
        background-color: #4f46e5;
        border-radius: 50%;
      }
      
      .appointment {
        font-size: 0.85rem;
        padding: 0.25rem 0.5rem;
        background-color: #e0e7ff;
        color: #4338ca;
        border-radius: 4px;
        margin-bottom: 0.25rem;
        cursor: pointer;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      /* Appointment list */
      .day-appointments {
        margin-top: 2rem;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
      }
      
      .appointments-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      
      .appointments-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
      }
      
      .time-slot {
        display: flex;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e5e7eb;
      }
      
      .time-slot:last-child {
        border-bottom: none;
      }
      
      .time-label {
        width: 80px;
        font-weight: 500;
        color: #4b5563;
      }
      
      .time-appointments {
        flex: 1;
      }
      
      .notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 1rem;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #4f46e5;
        max-width: 350px;
        transform: translateX(400px);
        transition: transform 0.3s ease;
        z-index: 1000;
      }
      
      .notification.show {
        transform: translateX(0);
      }
      
      .notification-title {
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      
      .notification-message {
        color: #6b7280;
        font-size: 0.9rem;
      }
      
      /* Responsive */
      @media (max-width: 768px) {
        .calendar-grid {
          grid-template-columns: repeat(1, 1fr);
        }
        
        .day-labels {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>
          <img src="/attached_assets/Fleur de Vie multicolore.jpg" alt="Fleur de Vie">
          Calendario
        </h1>
        <a href="/app.html" class="btn">Torna alla Home</a>
      </header>
      
      <div class="calendar-controls">
        <div class="calendar-title">Aprile 2025</div>
        <div class="calendar-actions">
          <button class="calendar-btn" onclick="prevMonth()">&lt; Precedente</button>
          <button class="calendar-btn active" onclick="currentMonth()">Oggi</button>
          <button class="calendar-btn" onclick="nextMonth()">Successivo &gt;</button>
        </div>
      </div>
      
      <div class="calendar-view">
        <div class="day-labels">
          <div class="day-label">Lun</div>
          <div class="day-label">Mar</div>
          <div class="day-label">Mer</div>
          <div class="day-label">Gio</div>
          <div class="day-label">Ven</div>
          <div class="day-label">Sab</div>
          <div class="day-label">Dom</div>
        </div>
        
        <div class="calendar-grid" id="calendarGrid">
          <!-- Generato dinamicamente da JavaScript -->
        </div>
      </div>
      
      <div class="day-appointments">
        <div class="appointments-header">
          <div class="appointments-title">Martedì 8 Aprile 2025</div>
          <button class="btn btn-primary" id="newAppointmentBtn">Nuovo Appuntamento</button>
        </div>
        
        <div class="time-slots">
          <div class="time-slot">
            <div class="time-label">09:00</div>
            <div class="time-appointments">
              <div class="appointment">Mario Rossi - Test Diacom</div>
            </div>
          </div>
          <div class="time-slot">
            <div class="time-label">10:00</div>
            <div class="time-appointments">
              <div class="appointment">Anna Verdi - Terapia Bicom</div>
            </div>
          </div>
          <div class="time-slot">
            <div class="time-label">11:00</div>
            <div class="time-appointments"></div>
          </div>
          <div class="time-slot">
            <div class="time-label">12:00</div>
            <div class="time-appointments"></div>
          </div>
          <div class="time-slot">
            <div class="time-label">14:00</div>
            <div class="time-appointments">
              <div class="appointment">Laura Bianchi - Terapia luce Zapter</div>
            </div>
          </div>
          <div class="time-slot">
            <div class="time-label">15:00</div>
            <div class="time-appointments"></div>
          </div>
          <div class="time-slot">
            <div class="time-label">16:00</div>
            <div class="time-appointments">
              <div class="appointment">Giuseppe Neri - Detox</div>
            </div>
          </div>
          <div class="time-slot">
            <div class="time-label">17:00</div>
            <div class="time-appointments"></div>
          </div>
          <div class="time-slot">
            <div class="time-label">18:00</div>
            <div class="time-appointments"></div>
          </div>
        </div>
      </div>
      
      <!-- Notification container -->
      <div class="notification" id="notification">
        <div class="notification-title">Notifica</div>
        <div class="notification-message" id="notificationMessage"></div>
      </div>
    </div>
    
    <script>
      // Dati calendario
      const today = new Date();
      const currentYear = today.getFullYear();
      const currentMonth = today.getMonth();
      const currentDate = today.getDate();
      
      // Genera griglia calendario
      function generateCalendar(year = currentYear, month = currentMonth) {
        const calendarGrid = document.getElementById('calendarGrid');
        calendarGrid.innerHTML = '';
        
        // Primo giorno del mese
        const firstDay = new Date(year, month, 1);
        // Ultimo giorno del mese
        const lastDay = new Date(year, month + 1, 0);
        
        // Calcola il giorno della settimana del primo giorno (0 = Domenica, 1 = Lunedì, ...)
        let startDay = firstDay.getDay() - 1; // Adattato per iniziare con Lunedì
        if (startDay < 0) startDay = 6; // Se è Domenica, va alla fine
        
        // Aggiunge celle per i giorni del mese precedente
        const prevMonthLastDay = new Date(year, month, 0).getDate();
        for (let i = 0; i < startDay; i++) {
          const day = prevMonthLastDay - startDay + i + 1;
          const dateCell = createDateCell(day, true);
          calendarGrid.appendChild(dateCell);
        }
        
        // Aggiunge celle per i giorni del mese corrente
        for (let day = 1; day <= lastDay.getDate(); day++) {
          const isToday = day === currentDate && month === currentMonth && year === currentYear;
          const dateCell = createDateCell(day, false, isToday);
          
          // Aggiunge appuntamenti per alcuni giorni di esempio
          if ((day === 8 || day === 15 || day === 22) && month === 3) { // Aprile (3) con alcuni appuntamenti
            const appointment = document.createElement('div');
            appointment.className = 'appointment';
            appointment.textContent = 'Appuntamento';
            dateCell.appendChild(appointment);
          }
          
          calendarGrid.appendChild(dateCell);
        }
        
        // Calcola quante celle sono state create finora
        const cellsCreated = startDay + lastDay.getDate();
        // Calcola quante celle mancano per completare la griglia (multiplo di 7)
        const remaining = 7 - (cellsCreated % 7);
        if (remaining < 7) {
          // Aggiunge celle per i giorni del mese successivo
          for (let day = 1; day <= remaining; day++) {
            const dateCell = createDateCell(day, true);
            calendarGrid.appendChild(dateCell);
          }
        }
      }
      
      // Crea cella del calendario
      function createDateCell(day, isOtherMonth = false, isToday = false) {
        const dateCell = document.createElement('div');
        dateCell.className = 'calendar-date';
        if (isOtherMonth) dateCell.classList.add('other-month');
        if (isToday) dateCell.classList.add('today');
        
        const dateHeader = document.createElement('div');
        dateHeader.className = 'date-header';
        
        const dateNumber = document.createElement('div');
        dateNumber.className = 'date-number';
        dateNumber.textContent = day;
        dateHeader.appendChild(dateNumber);
        
        if (!isOtherMonth && Math.random() > 0.7) {
          const indicator = document.createElement('div');
          indicator.className = 'appointment-indicator';
          dateHeader.appendChild(indicator);
        }
        
        dateCell.appendChild(dateHeader);
        
        // Aggiunge evento click alla data
        dateCell.addEventListener('click', () => {
          document.querySelector('.appointments-title').textContent = `Dettaglio Giorno ${day}`;
          showNotification(`Hai selezionato il giorno ${day}`);
        });
        
        return dateCell;
      }
      
      // Cambia mese
      function prevMonth() {
        showNotification('Mese precedente (demo)');
      }
      
      function nextMonth() {
        showNotification('Mese successivo (demo)');
      }
      
      function currentMonth() {
        generateCalendar();
        showNotification('Mese corrente');
      }
      
      // Notifiche
      const notification = document.getElementById('notification');
      const notificationMessage = document.getElementById('notificationMessage');
      
      function showNotification(message) {
        notificationMessage.textContent = message;
        notification.classList.add('show');
        
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }
      
      // Inizializzazione
      document.addEventListener('DOMContentLoaded', () => {
        generateCalendar();
        
        // Nuovo appuntamento
        document.getElementById('newAppointmentBtn').addEventListener('click', () => {
          showNotification('Creazione nuovo appuntamento (demo)');
        });
        
        // Verifica immagine
        const img = new Image();
        img.src = '/attached_assets/Fleur de Vie multicolore.jpg';
        img.onerror = function() {
          console.error('Errore caricamento immagine');
          document.querySelector('h1 img').src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="%234f46e5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';
        };
      });
    </script>
  </body>
</html>