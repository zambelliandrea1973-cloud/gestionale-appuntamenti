<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clienti - Sistema di Gestione Appuntamenti</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f9fafb;
      margin: 0;
      padding: 0;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    header {
      text-align: center;
      margin-bottom: 2.5rem;
    }
    
    h1 {
      color: #4f46e5;
      margin-bottom: 0.6rem;
      font-size: 2.2rem;
      font-weight: 700;
    }
    
    /* Links di navigazione */
    .nav-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .nav-link {
      color: #4f46e5;
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 0.75rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    
    .nav-link:hover {
      background-color: rgba(79, 70, 229, 0.1);
    }
    
    .nav-link.active {
      background-color: #4f46e5;
      color: white;
    }
    
    /* Client Management */
    .clients-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .search-container {
      position: relative;
      width: 100%;
      max-width: 300px;
    }
    
    .search-input {
      width: 100%;
      padding: 0.625rem 1rem 0.625rem 2.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 0.875rem;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }
    
    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      width: 16px;
      height: 16px;
    }
    
    .btn {
      display: inline-block;
      padding: 0.625rem 1.25rem;
      background-color: #4f46e5;
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: background-color 0.3s ease;
      text-align: center;
      border: none;
      cursor: pointer;
    }
    
    .btn:hover {
      background-color: #4338ca;
    }
    
    .btn-outline {
      background-color: transparent;
      color: #4f46e5;
      border: 1px solid #4f46e5;
    }
    
    .btn-outline:hover {
      background-color: #4f46e5;
      color: white;
    }
    
    .clients-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    
    .client-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    
    .client-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .client-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .client-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-weight: 600;
      color: #4f46e5;
      font-size: 1.25rem;
    }
    
    .client-name {
      flex: 1;
    }
    
    .client-name h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0;
      color: #1f2937;
    }
    
    .client-info {
      margin-bottom: 0.5rem;
      color: #6b7280;
      font-size: 0.875rem;
    }
    
    .client-info-label {
      font-weight: 500;
      color: #4b5563;
      margin-right: 0.25rem;
    }
    
    .client-actions {
      display: flex;
      justify-content: space-between;
      margin-top: auto;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }
    
    .client-action {
      padding: 0.5rem;
      border-radius: 4px;
      background-color: transparent;
      color: #4b5563;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease, color 0.2s ease;
    }
    
    .client-action:hover {
      background-color: #f3f4f6;
      color: #4f46e5;
    }
    
    .consent-status {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: inline-flex;
      align-items: center;
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .consent-status.provided {
      color: #10b981;
    }
    
    .consent-status.missing {
      color: #ef4444;
    }
    
    .consent-icon {
      margin-right: 0.25rem;
    }
    
    /* Client Detail Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      overflow-y: auto;
    }
    
    .modal.active {
      display: block;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 8px;
      max-width: 800px;
      margin: 2rem auto;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .modal-header {
      padding: 1.5rem;
      background-color: #4f46e5;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .modal-close {
      background: transparent;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background-color 0.2s ease;
    }
    
    .modal-close:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    .client-detail-tabs {
      display: flex;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 1.5rem;
    }
    
    .client-detail-tab {
      padding: 0.75rem 1rem;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      transition: color 0.2s ease, border-color 0.2s ease;
    }
    
    .client-detail-tab.active {
      color: #4f46e5;
      border-bottom-color: #4f46e5;
    }
    
    .client-detail-tab:hover:not(.active) {
      color: #4b5563;
      border-bottom-color: #e5e7eb;
    }
    
    .client-detail-content {
      display: none;
    }
    
    .client-detail-content.active {
      display: block;
    }
    
    .info-group {
      margin-bottom: 1.5rem;
    }
    
    .info-group-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #4b5563;
    }
    
    .info-row {
      display: flex;
      margin-bottom: 0.5rem;
    }
    
    .info-label {
      width: 150px;
      font-weight: 500;
      color: #6b7280;
    }
    
    .info-value {
      flex: 1;
      color: #1f2937;
    }
    
    .appointments-list {
      margin-top: 1rem;
    }
    
    .appointment-item {
      padding: 1rem;
      background-color: #f9fafb;
      border-radius: 6px;
      margin-bottom: 0.75rem;
      border-left: 4px solid #4f46e5;
    }
    
    .appointment-date {
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.5rem;
    }
    
    .appointment-time {
      font-weight: 500;
      color: #4b5563;
      margin-right: 1rem;
    }
    
    .appointment-service {
      color: #6b7280;
    }
    
    /* Animation */
    .animate-fade {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Fleur de Vie (mini) */
    .fleur-container-mini {
      width: 40px;
      height: 40px;
      display: inline-block;
      margin-right: 1rem;
    }
    
    .fleur-image-mini {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid rgba(79, 70, 229, 0.2);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .nav-links {
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
      }
      
      .clients-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .search-container {
        max-width: 100%;
      }
      
      .client-detail-tabs {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 0.5rem;
      }
      
      .modal-content {
        margin: 1rem;
      }
      
      .info-row {
        flex-direction: column;
      }
      
      .info-label {
        width: 100%;
        margin-bottom: 0.25rem;
      }
    }
  </style>
</head>
<body>
  <div class="container animate-fade">
    <header>
      <h1>
        <div class="fleur-container-mini">
          <img src="/attached_assets/Fleur de Vie multicolore.jpg" alt="Fleur de Vie" class="fleur-image-mini">
        </div>
        Gestione Clienti
      </h1>
      
      <div class="nav-links">
        <a href="/" class="nav-link">Home</a>
        <a href="/calendar.html" class="nav-link">Calendario</a>
        <a href="/clients.html" class="nav-link active">Clienti</a>
        <a href="/debug.html" class="nav-link">Debug</a>
      </div>
    </header>
    
    <main>
      <div class="clients-header">
        <div class="search-container">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          <input type="text" class="search-input" placeholder="Cerca clienti..." id="client-search">
        </div>
        
        <button class="btn" id="new-client-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon" style="margin-right: 0.5rem; vertical-align: text-bottom;">
            <path d="M12 5v14M5 12h14"></path>
          </svg>
          Nuovo Cliente
        </button>
      </div>
      
      <div class="clients-grid" id="clients-grid">
        <!-- Client cards will be generated dynamically -->
      </div>
    </main>
    
    <!-- Client Detail Modal -->
    <div class="modal" id="client-detail-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-client-name">Dettagli Cliente</h2>
          <button class="modal-close" id="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="client-detail-tabs">
            <button class="client-detail-tab active" data-tab="info">Informazioni</button>
            <button class="client-detail-tab" data-tab="medical">Cartella Cliente</button>
            <button class="client-detail-tab" data-tab="appointments">Appuntamenti</button>
            <button class="client-detail-tab" data-tab="consent">Consensi</button>
          </div>
          
          <div class="client-detail-content active" id="tab-info">
            <div class="info-group">
              <h3 class="info-group-title">Informazioni Personali</h3>
              <div class="info-row">
                <div class="info-label">Nome</div>
                <div class="info-value" id="detail-first-name">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Cognome</div>
                <div class="info-value" id="detail-last-name">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Email</div>
                <div class="info-value" id="detail-email">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Telefono</div>
                <div class="info-value" id="detail-phone">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Data di nascita</div>
                <div class="info-value" id="detail-birth-date">-</div>
              </div>
            </div>
            
            <div class="info-group">
              <h3 class="info-group-title">Indirizzo</h3>
              <div class="info-row">
                <div class="info-label">Via</div>
                <div class="info-value" id="detail-street">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Città</div>
                <div class="info-value" id="detail-city">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">CAP</div>
                <div class="info-value" id="detail-postal-code">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Provincia</div>
                <div class="info-value" id="detail-province">-</div>
              </div>
            </div>
            
            <div class="info-group">
              <h3 class="info-group-title">Note</h3>
              <div class="info-row">
                <div class="info-value" id="detail-notes">-</div>
              </div>
            </div>
          </div>
          
          <div class="client-detail-content" id="tab-medical">
            <div class="info-group">
              <h3 class="info-group-title">Informazioni Mediche</h3>
              <div class="info-row">
                <div class="info-label">Condizioni</div>
                <div class="info-value" id="detail-conditions">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Allergie</div>
                <div class="info-value" id="detail-allergies">-</div>
              </div>
              <div class="info-row">
                <div class="info-label">Farmaci</div>
                <div class="info-value" id="detail-medications">-</div>
              </div>
            </div>
            
            <div class="info-group">
              <h3 class="info-group-title">Note Mediche</h3>
              <div class="appointment-item">
                <div class="appointment-date">10/04/2025</div>
                <div>Test Diacom effettuato. Rilevate leggere intolleranze a lattosio e glutine. Consigliata integrazione con probiotici e dieta temporanea di eliminazione.</div>
              </div>
              <div class="appointment-item">
                <div class="appointment-date">25/03/2025</div>
                <div>Terapia Bicom per riduzione stress. Utilizzo di frequenze 381.9, 395.2, 422.8. Riportato miglioramento nella qualità del sonno.</div>
              </div>
              <div class="appointment-item">
                <div class="appointment-date">12/03/2025</div>
                <div>Prima valutazione. Riferiti disturbi digestivi occasionali e affaticamento cronico. Programmato ciclo di test e terapia.</div>
              </div>
            </div>
          </div>
          
          <div class="client-detail-content" id="tab-appointments">
            <button class="btn" id="new-appointment-client-btn" style="margin-bottom: 1rem;">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon" style="margin-right: 0.5rem; vertical-align: text-bottom;">
                <path d="M12 5v14M5 12h14"></path>
              </svg>
              Nuovo Appuntamento
            </button>
            
            <div class="appointments-list">
              <div class="appointment-item">
                <div class="appointment-date">15/04/2025</div>
                <span class="appointment-time">09:30</span>
                <span class="appointment-service">Test Diacom - Follow up</span>
              </div>
              <div class="appointment-item">
                <div class="appointment-date">10/04/2025</div>
                <span class="appointment-time">10:30</span>
                <span class="appointment-service">Test Diacom</span>
              </div>
              <div class="appointment-item">
                <div class="appointment-date">25/03/2025</div>
                <span class="appointment-time">15:00</span>
                <span class="appointment-service">Terapia Bicom</span>
              </div>
              <div class="appointment-item">
                <div class="appointment-date">12/03/2025</div>
                <span class="appointment-time">11:15</span>
                <span class="appointment-service">Prima Visita</span>
              </div>
            </div>
          </div>
          
          <div class="client-detail-content" id="tab-consent">
            <div class="info-group">
              <h3 class="info-group-title">Stato Consensi</h3>
              <div class="info-row">
                <div class="info-label">Trattamento dati</div>
                <div class="info-value" id="detail-data-consent">
                  <span style="color: #10b981; font-weight: 500;">✓ Fornito il 12/03/2025</span>
                </div>
              </div>
              <div class="info-row">
                <div class="info-label">Dati sensibili</div>
                <div class="info-value" id="detail-sensitive-consent">
                  <span style="color: #10b981; font-weight: 500;">✓ Fornito il 12/03/2025</span>
                </div>
              </div>
              <div class="info-row">
                <div class="info-label">Marketing</div>
                <div class="info-value" id="detail-marketing-consent">
                  <span style="color: #ef4444; font-weight: 500;">✗ Non fornito</span>
                </div>
              </div>
            </div>
            
            <div class="info-group">
              <h3 class="info-group-title">Accesso Cliente</h3>
              <div style="margin-bottom: 1rem;">
                <button class="btn" id="generate-qr-btn">Genera QR Code</button>
                <span style="margin-left: 1rem; font-size: 0.875rem; color: #6b7280;">Permette al cliente di accedere alla propria area riservata</span>
              </div>
              <div id="qr-display" style="display: none; text-align: center; padding: 1rem; background-color: #f9fafb; border-radius: 8px;">
                <!-- QR code will be displayed here -->
                <div style="background-color: white; display: inline-block; padding: 1rem; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                  <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIiBzdHlsZT0id2lkdGg6IDIwMHB4OyBoZWlnaHQ6IDIwMHB4Ij48cGF0aCBkPSJNODMuNSw3NS41aDI5djI5aC0yOVptMzMsMGgyOXYyOWgtMjlabS0zMywzM2gyOXYyOWgtMjlabTMzLDBoMjl2MjloLTI5Wm0tNjYtNjZoMjl2MjloLTI5Wm02NiwwaDF2MWgtMVptLTMzLDMzaC0xdi0xaDFabTY2LTMzaDI5djI5aC0yOVptMCwzM2gyOXYyOWgtMjlabS0zMywzM2gyOXYyOWgtMjlabTMzLDBoMjl2MjloLTI5Wm0tNjYsMGgyOXYyOWgtMjlabTY2LDMzaC0xdi0xaDFabS0zMywwaDI5djI5aC0yOVptMzMsMGgyOXYyOWgtMjlabS02NiwwaC0xdi0xaDFaIiBmaWxsPSJibGFjayIvPjwvc3ZnPg==" alt="QR Code" style="width: 150px; height: 150px;">
                  <div style="margin-top: 0.5rem; font-weight: 500;">Scansiona con la fotocamera</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Gestione Clienti caricata correttamente');
      
      // Evidenzia link attivo
      const path = window.location.pathname;
      const navLinks = document.querySelectorAll('.nav-link');
      
      navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (path === href) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
      
      // Mock data per clienti di esempio
      const clients = [
        {
          id: 1,
          firstName: 'Maria',
          lastName: 'Rossi',
          email: 'maria.rossi@email.com',
          phone: '333 1234567',
          birthDate: '15/06/1985',
          address: {
            street: 'Via Roma 123',
            city: 'Milano',
            postalCode: '20121',
            province: 'MI'
          },
          hasConsent: true
        },
        {
          id: 2,
          firstName: 'Luigi',
          lastName: 'Bianchi',
          email: 'luigi.bianchi@email.com',
          phone: '333 7654321',
          birthDate: '03/11/1978',
          address: {
            street: 'Via Garibaldi 45',
            city: 'Milano',
            postalCode: '20123',
            province: 'MI'
          },
          hasConsent: true
        },
        {
          id: 3,
          firstName: 'Anna',
          lastName: 'Verdi',
          email: 'anna.verdi@email.com',
          phone: '333 9876543',
          birthDate: '22/03/1990',
          address: {
            street: 'Corso Italia 78',
            city: 'Milano',
            postalCode: '20122',
            province: 'MI'
          },
          hasConsent: false
        },
        {
          id: 4,
          firstName: 'Paolo',
          lastName: 'Neri',
          email: 'paolo.neri@email.com',
          phone: '333 4567890',
          birthDate: '10/09/1982',
          address: {
            street: 'Via Montenapoleone 10',
            city: 'Milano',
            postalCode: '20121',
            province: 'MI'
          },
          hasConsent: true
        },
        {
          id: 5,
          firstName: 'Laura',
          lastName: 'Gialli',
          email: 'laura.gialli@email.com',
          phone: '333 3456789',
          birthDate: '05/12/1988',
          address: {
            street: 'Via Dante 56',
            city: 'Milano',
            postalCode: '20123',
            province: 'MI'
          },
          hasConsent: false
        },
        {
          id: 6,
          firstName: 'Marco',
          lastName: 'Blu',
          email: 'marco.blu@email.com',
          phone: '333 2345678',
          birthDate: '18/07/1975',
          address: {
            street: 'Piazza Duomo 1',
            city: 'Milano',
            postalCode: '20121',
            province: 'MI'
          },
          hasConsent: true
        }
      ];
      
      // Genera le card dei clienti
      function renderClients(clientsList) {
        const clientsGrid = document.getElementById('clients-grid');
        clientsGrid.innerHTML = '';
        
        clientsList.forEach(client => {
          const clientCard = document.createElement('div');
          clientCard.className = 'client-card';
          clientCard.dataset.clientId = client.id;
          
          const consentStatus = document.createElement('div');
          consentStatus.className = `consent-status ${client.hasConsent ? 'provided' : 'missing'}`;
          
          if (client.hasConsent) {
            consentStatus.innerHTML = `
              <svg class="consent-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 6L9 17l-5-5"/>
              </svg>
              Consenso fornito
            `;
          } else {
            consentStatus.innerHTML = `
              <svg class="consent-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
              Consenso mancante
            `;
          }
          
          clientCard.appendChild(consentStatus);
          
          const clientHeader = document.createElement('div');
          clientHeader.className = 'client-header';
          
          const clientAvatar = document.createElement('div');
          clientAvatar.className = 'client-avatar';
          clientAvatar.textContent = client.firstName.charAt(0) + client.lastName.charAt(0);
          
          const clientName = document.createElement('div');
          clientName.className = 'client-name';
          
          const clientNameH3 = document.createElement('h3');
          clientNameH3.textContent = `${client.firstName} ${client.lastName}`;
          
          clientName.appendChild(clientNameH3);
          clientHeader.appendChild(clientAvatar);
          clientHeader.appendChild(clientName);
          
          const clientEmail = document.createElement('div');
          clientEmail.className = 'client-info';
          clientEmail.innerHTML = `<span class="client-info-label">Email:</span> ${client.email}`;
          
          const clientPhone = document.createElement('div');
          clientPhone.className = 'client-info';
          clientPhone.innerHTML = `<span class="client-info-label">Telefono:</span> ${client.phone}`;
          
          const clientAddress = document.createElement('div');
          clientAddress.className = 'client-info';
          clientAddress.innerHTML = `<span class="client-info-label">Indirizzo:</span> ${client.address.street}, ${client.address.city}`;
          
          const clientActions = document.createElement('div');
          clientActions.className = 'client-actions';
          
          clientActions.innerHTML = `
            <button class="client-action view-client" title="Visualizza dettagli">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
            <button class="client-action edit-client" title="Modifica">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
              </svg>
            </button>
            <button class="client-action appointment-client" title="Nuovo appuntamento">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
                <line x1="12" y1="14" x2="12" y2="18"></line>
                <line x1="10" y1="16" x2="14" y2="16"></line>
              </svg>
            </button>
            <button class="client-action delete-client" title="Elimina">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          `;
          
          clientCard.appendChild(clientHeader);
          clientCard.appendChild(clientEmail);
          clientCard.appendChild(clientPhone);
          clientCard.appendChild(clientAddress);
          clientCard.appendChild(clientActions);
          
          clientsGrid.appendChild(clientCard);
        });
        
        // Aggiungi gli event listeners ai pulsanti
        document.querySelectorAll('.view-client').forEach(button => {
          button.addEventListener('click', function() {
            const clientId = parseInt(this.closest('.client-card').dataset.clientId);
            openClientDetailModal(clientId);
          });
        });
        
        document.querySelectorAll('.edit-client').forEach(button => {
          button.addEventListener('click', function() {
            alert('Funzionalità di modifica cliente sarà implementata prossimamente');
          });
        });
        
        document.querySelectorAll('.appointment-client').forEach(button => {
          button.addEventListener('click', function() {
            alert('Funzionalità di creazione appuntamento sarà implementata prossimamente');
          });
        });
        
        document.querySelectorAll('.delete-client').forEach(button => {
          button.addEventListener('click', function() {
            alert('Funzionalità di eliminazione cliente sarà implementata prossimamente');
          });
        });
      }
      
      // Inizializza con i clienti mock
      renderClients(clients);
      
      // Funzionalità di ricerca
      document.getElementById('client-search').addEventListener('input', function() {
        const searchText = this.value.toLowerCase();
        
        if (searchText.trim() === '') {
          renderClients(clients);
          return;
        }
        
        const filteredClients = clients.filter(client => {
          return client.firstName.toLowerCase().includes(searchText) ||
                 client.lastName.toLowerCase().includes(searchText) ||
                 client.email.toLowerCase().includes(searchText) ||
                 client.phone.includes(searchText);
        });
        
        renderClients(filteredClients);
      });
      
      // Gestione modal dettagli cliente
      const modal = document.getElementById('client-detail-modal');
      const modalClose = document.getElementById('modal-close');
      
      modalClose.addEventListener('click', function() {
        modal.classList.remove('active');
      });
      
      window.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.classList.remove('active');
        }
      });
      
      // Gestione tabs dettagli cliente
      const tabButtons = document.querySelectorAll('.client-detail-tab');
      const tabContents = document.querySelectorAll('.client-detail-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Rimuovi la classe active da tutti i pulsanti e contenuti
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          
          // Aggiungi la classe active al pulsante cliccato
          this.classList.add('active');
          
          // Mostra il contenuto corrispondente
          const tabId = this.getAttribute('data-tab');
          document.getElementById(`tab-${tabId}`).classList.add('active');
        });
      });
      
      // Apertura modal dettagli cliente
      function openClientDetailModal(clientId) {
        // Trova il cliente corrispondente
        const client = clients.find(c => c.id === clientId);
        
        if (!client) {
          alert('Cliente non trovato!');
          return;
        }
        
        // Aggiorna i dati nel modal
        document.getElementById('modal-client-name').textContent = `${client.firstName} ${client.lastName}`;
        document.getElementById('detail-first-name').textContent = client.firstName;
        document.getElementById('detail-last-name').textContent = client.lastName;
        document.getElementById('detail-email').textContent = client.email;
        document.getElementById('detail-phone').textContent = client.phone;
        document.getElementById('detail-birth-date').textContent = client.birthDate;
        document.getElementById('detail-street').textContent = client.address.street;
        document.getElementById('detail-city').textContent = client.address.city;
        document.getElementById('detail-postal-code').textContent = client.address.postalCode;
        document.getElementById('detail-province').textContent = client.address.province;
        
        // Visualizza il modal
        modal.classList.add('active');
        
        // Reimposta la visualizzazione sulla tab Informazioni
        tabButtons.forEach(btn => btn.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));
        
        document.querySelector('.client-detail-tab[data-tab="info"]').classList.add('active');
        document.getElementById('tab-info').classList.add('active');
      }
      
      // Pulsante Nuovo Cliente
      document.getElementById('new-client-btn').addEventListener('click', function() {
        alert('Funzionalità "Nuovo Cliente" sarà implementata prossimamente');
      });
      
      // Pulsante Nuovo Appuntamento (nel tab appuntamenti)
      document.getElementById('new-appointment-client-btn').addEventListener('click', function() {
        alert('Funzionalità "Nuovo Appuntamento" sarà implementata prossimamente');
      });
      
      // Pulsante Genera QR Code
      document.getElementById('generate-qr-btn').addEventListener('click', function() {
        const qrDisplay = document.getElementById('qr-display');
        
        if (qrDisplay.style.display === 'none') {
          qrDisplay.style.display = 'block';
          this.textContent = 'Nascondi QR Code';
        } else {
          qrDisplay.style.display = 'none';
          this.textContent = 'Genera QR Code';
        }
      });
    });
  </script>
</body>
</html>